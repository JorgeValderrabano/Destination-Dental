!function(p,n){"use strict";var u,b,m,v="function"==typeof kjua;function w(n){return joinchat_obj.settings.message_send.replace("{AGENT}",n)}function t(){if(joinchat_obj.settings&&joinchat_obj.settings.agents){var t,i=joinchat_obj.settings.agents,n=!!joinchat_obj.settings.message_hash,e=!!joinchat_obj.$(".joinchat__channels").length,c=(a=new Date,f=a.getTimezoneOffset()+i.gtm_offset,new Date(a.getTime()+6e4*f)),s=c.getDay(),_=p.extend({},i.list),a=["joinchat__agents","joinchat__contact"],h="",l=!0;if(joinchat_obj.expand_agents=function(){l=!1;var n=joinchat_obj.$(".joinchat__box__scroll");joinchat_obj.$(".joinchat__agents").removeClass("joinchat__agents--collapsed"),n.animate({scrollTop:t[0].offsetTop-n[0].offsetTop-10},200)},_=p.map(_,function(o){var e,a,n,t=o.days[s];return"boolean"==typeof t?o.online=t:(o.online=!1,p.each(t.split(" "),function(n,t){var t=t.split("-"),e=t[0].split(":"),a=new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(e[0]),parseInt(e[1]),0),t="00:00"==t[1]?new Date(c.getFullYear(),c.getMonth(),c.getDate()+1,0,0,0):(e=t[1].split(":"),new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(e[0]),parseInt(e[1]),0));a<=c&&c<t&&(o.online=!0)})),!o.online&&i.offline_show&&(e=6048e5,a=[],p.each(o.days,function(n,t){var e=n<s?n-s+7:n-s;!0===t?a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()+e,0,0,0)):!1!==t&&p.each(t.split(" "),function(n,t){t=t.split("-")[0].split(":");a.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()+e,parseInt(t[0]),parseInt(t[1]),0))})}),p.each(a,function(n,t){c<t&&t-c<e&&(e=t-c)}),6048e5==e?o.back="···":864e5<e?(n=Math.ceil(e/864e5),o.back=i.i18n.d[1<e?1:0].replace("%s",n)):36e5<e?(n=Math.ceil(e/36e5),o.back=i.i18n.h[1<e?1:0].replace("%s",n)):6e4<e?(n=Math.ceil(e/6e4),o.back=i.i18n.m[1<e?1:0].replace("%s",n)):o.back=i.i18n.m[0].replace("%s",1)),o}),0==(_=i.offline_show?_:p.grep(_,function(n){return n.online})).length)joinchat_obj.$div.addClass("joinchat--hidden");else if(n||1!=_.length||joinchat_obj.settings.chatbot||e){if(i.random_order)for(var o=_,j=o.length-1;0<j;j--){var r=Math.floor(Math.random()*(j+1)),d=o[j];o[j]=o[r],o[r]=d}var g,f,l=f=n&&1<_.length;i.offline_show&&i.offline_contact&&a.push("joinchat__agents--offline-contact"),f&&a.push("joinchat__agents--collapsed"),p.each(_,function(n,t){var e=t.online?"joinchat__agent--online":"joinchat__agent--offline",a='data-id="'+n+'"',o="";0==n&&(a+=5<_.length?' data-count="+'+(_.length-5)+'"':"",o='data-start="'+joinchat_obj.$(".joinchat__button__sendtext").text()+'"'),h+='<div class="joinchat__agent__wrapper"><div class="joinchat__agent {{classes}}" {{data_agent}}> <div class="joinchat__agent__image" style="{{image}}"></div> <div class="joinchat__agent__info" {{data_info}}>  <div class="joinchat__agent__name">{{name}}</div>  <div class="joinchat__agent__role">{{role}}</div> </div> <div class="joinchat__agent__out">{{back}}</div></div></div>'.replace("{{data_agent}}",a).replace("{{data_info}}",o).replace("{{classes}}",e).replace("{{name}}",t.name).replace("{{role}}",t.role).replace("{{image}}",t.image?"background-image:url("+t.image+");":"").replace("{{back}}",t.back||"")}),t=p('<div class="'+a.join(" ")+'">'+h+"</div>"),joinchat_obj.$(".joinchat__box__content").append(t),t[0].style.setProperty("--agents",_.length),f&&p(document).on("joinchat:hide",function(){l=!0,setTimeout(function(){t.addClass("joinchat__agents--collapsed")},500)}),t.on("click",".joinchat__agent",function(){var n=_[p(this).data("id")];l?joinchat_obj.expand_agents():(n.online||i.offline_contact)&&(joinchat_obj.save_hash(),joinchat_obj.chatbox_hide(),joinchat_obj.open_whatsapp(n.phone,w(n.name)))}),!joinchat_obj.is_mobile&&v&&(u=joinchat_obj.$div.hasClass("joinchat--left"),g=joinchat_obj.$(".joinchat__qr"),p(document).one("joinchat:show",function(){joinchat_obj.$(".joinchat__qr canvas:not(.qr__channel)").remove(),p.each(_,function(n,t){(i.offline_contact||t.online)&&((t=kjua({text:joinchat_obj.whatsapp_link(t.phone,w(t.name),!1),render:"canvas",rounded:80})).classList.add("qr__channel","qr__channel--agent-"+n),g.append(t))})}),joinchat_obj.$(".joinchat__agent").on("mouseenter",function(){var o;l||!i.offline_contact&&p(this).hasClass("joinchat__agent--offline")||(o=this,clearTimeout(m),clearTimeout(b),g.addClass("joinchat__qr--show"),b=setTimeout(function(){var n,t,e,a;n=o.parentElement,t=Array.from(n.parentElement.children).indexOf(n),joinchat_obj.$(".qr__channel--show").removeClass("qr__channel--show"),joinchat_obj.$(".qr__channel--agent-"+t).addClass("qr__channel--show"),t=joinchat_obj.$(".joinchat__box").get(0).clientWidth,e=joinchat_obj.$(".joinchat__box").get(0).clientHeight,a=joinchat_obj.$(".joinchat__box__scroll").get(0).scrollTop,t=u?0:-1*t+16,e=e+a-n.offsetTop-n.clientHeight-8,joinchat_obj.$div.css({"--qr-x":t+"px","--qr-y":"-"+e+"px","--qr-a":"calc(var(--s)/2 - 6px)"})},200))}).on("mouseleave",function(){l||!i.offline_contact&&p(this).hasClass("joinchat__agent--offline")||(m=setTimeout(function(){g.removeClass("joinchat__qr--show")},300))}),p(document).on("joinchat:hide",function(){g.removeClass("joinchat__qr--show")})),p(document).on("joinchat:can_contact",function(){e||(t.removeClass("joinchat--hidden"),setTimeout(joinchat_obj.expand_agents,10))})}else i.offline_contact||_[0].online?(joinchat_obj.settings.telephone=_[0].phone,joinchat_obj.$(".joinchat__button").off("mouseenter mouseleave click").on("click",function(){joinchat_obj.save_hash(),joinchat_obj.open_whatsapp(_[0].phone,w(_[0].name))}),joinchat_obj.chatbox=!0,p(document).on("joinchat:hide",function(){joinchat_obj.chatbox=!0})):joinchat_obj.$div.addClass("joinchat--hidden");p(document).trigger("joinchat:agents",[_])}}n.joinchat_obj&&joinchat_obj.is_ready?t():p(document).one("joinchat:start",t)}(jQuery,window);